<div class="h-screen flex flex-col bg-gray-50 dark:bg-gray-900">
  <!-- Header -->
  <div class="bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700 p-4">
    <div class="flex items-center justify-between">
      <h1 class="text-2xl font-bold text-gray-900 dark:text-white">Trading Signals Dashboard</h1>
      <div class="flex items-center space-x-4">
        <!-- Auto-refresh toggle -->
        <div class="flex items-center">
          <p-inputSwitch [(ngModel)]="autoRefresh" (onChange)="toggleAutoRefresh()"></p-inputSwitch>
          <span class="ml-2 text-sm text-gray-600 dark:text-gray-400">Auto-refresh</span>
        </div>
        <!-- Connection status -->
        <div class="flex items-center">
          <div [class]="connectionStatus === 'connected' ? 'w-3 h-3 bg-green-500 rounded-full' : 'w-3 h-3 bg-red-500 rounded-full'"></div>
          <span class="ml-2 text-sm text-gray-600 dark:text-gray-400">
            {{ connectionStatus === 'connected' ? 'Kapcsolódva' : 'Kapcsolat megszakadt' }}
          </span>
        </div>
      </div>
    </div>
  </div>

  <!-- Main Content -->
  <div class="flex-1 flex flex-col overflow-hidden">
    <!-- Top Panel - Signals List -->
    <div class="h-1/2 flex border-b border-gray-200 dark:border-gray-700">
      <!-- Signals Table -->
      <div class="w-1/2 flex flex-col border-r border-gray-200 dark:border-gray-700">
        <!-- Filters -->
        <div class="bg-white dark:bg-gray-800 p-4 border-b border-gray-200 dark:border-gray-700">
          <div class="flex space-x-4">
            <p-dropdown
              [options]="symbolOptions"
              [(ngModel)]="selectedSymbolFilter"
              (onChange)="applyFilters()"
              placeholder="Összes symbol"
              [showClear]="true"
              class="flex-1"
            ></p-dropdown>
            <p-dropdown
              [options]="signalTypeOptions"
              [(ngModel)]="selectedSignalFilter"
              (onChange)="applyFilters()"
              placeholder="Összes jel"
              [showClear]="true"
              class="flex-1"
            ></p-dropdown>
            <p-dropdown
              [options]="confidenceOptions"
              [(ngModel)]="selectedConfidenceFilter"
              (onChange)="applyFilters()"
              placeholder="Összes erősség"
              [showClear]="true"
              class="flex-1"
            ></p-dropdown>
          </div>
        </div>

        <!-- Signals Table -->
        <div class="flex-1 overflow-auto bg-white dark:bg-gray-800">
          <p-table
            [value]="filteredSignals"
            [loading]="loading"
            [scrollable]="true"
            scrollHeight="100%"
            styleClass="p-datatable-sm"
          >
            <ng-template pTemplate="header">
              <tr>
                <th style="width: 140px">Idő</th>
                <th style="width: 100px">Symbol</th>
                <th style="width: 80px">Jel</th>
                <th style="width: 100px">Erősség</th>
                <th style="width: 120px">Entry Price</th>
              </tr>
            </ng-template>
            <ng-template pTemplate="body" let-signal let-rowIndex="rowIndex">
              <tr
                [class]="getRowClass(signal)"
                class="cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"
                [class.selected-row]="selectedSignal?.symbol === signal.symbol && selectedSignal?.timestamp === signal.timestamp"
                (click)="selectSignal(signal)"
              >
                <td class="text-sm">{{ signal.timestamp | date:'MM.dd HH:mm' }}</td>
                <td class="font-medium">{{ signal.symbol }}</td>
                <td>
                  <p-tag
                    [value]="signal.signal"
                    [severity]="getSignalSeverity(signal.signal)"
                    class="text-xs"
                  ></p-tag>
                </td>
                <td>
                  <span class="text-sm font-medium">{{ getConfidenceText(signal.confidence) }}</span>
                </td>
                <td class="text-sm font-mono">${{ signal.entry_price | number:'1.2-6' }}</td>
              </tr>
            </ng-template>
            <ng-template pTemplate="emptymessage">
              <tr>
                <td colspan="5" class="text-center py-8">
                  <i class="pi pi-info-circle text-4xl text-gray-400 mb-4"></i>
                  <p class="text-gray-500 dark:text-gray-400">Nincs elérhető szignál</p>
                </td>
              </tr>
            </ng-template>
          </p-table>
        </div>
      </div>

      <!-- Signal Summary -->
      <div class="w-1/2 flex flex-col bg-white dark:bg-gray-800">
        <div *ngIf="selectedSignal; else noSelection" class="flex-1 flex flex-col">
          <!-- Signal Header -->
          <div class="p-4 border-b border-gray-200 dark:border-gray-700">
            <div class="flex items-center justify-between mb-2">
              <h2 class="text-2xl font-bold text-gray-900 dark:text-white">{{ selectedSignal.symbol }}</h2>
              <p-tag
                [value]="selectedSignal.signal"
                [severity]="getSignalSeverity(selectedSignal.signal)"
                class="text-lg px-3 py-1"
              ></p-tag>
            </div>
            <div class="text-sm text-gray-500 dark:text-gray-400">
              {{ selectedSignal.timestamp | date:'yyyy.MM.dd HH:mm' }}
            </div>
          </div>

          <!-- Price Information -->
          <div class="flex-1 p-4">
            <div class="grid grid-cols-4 gap-3 mb-4">
              <div class="text-center p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg">
                <div class="text-xs text-blue-600 dark:text-blue-400 mb-1">Aktuális Ár</div>
                <div class="text-lg font-bold text-blue-600 dark:text-blue-400">${{ selectedSignal.current_price | number:'1.2-6' }}</div>
              </div>
              <div class="text-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg">
                <div class="text-xs text-gray-500 dark:text-gray-400 mb-1">Entry Price</div>
                <div class="text-lg font-bold text-gray-900 dark:text-white">${{ selectedSignal.entry_price | number:'1.2-6' }}</div>
              </div>
              <div class="text-center p-3 bg-red-50 dark:bg-red-900/20 rounded-lg">
                <div class="text-xs text-red-600 dark:text-red-400 mb-1">Stop Loss</div>
                <div class="text-lg font-bold text-red-600 dark:text-red-400">${{ selectedSignal.stop_loss | number:'1.2-6' }}</div>
              </div>
              <div class="text-center p-3 bg-green-50 dark:bg-green-900/20 rounded-lg">
                <div class="text-xs text-green-600 dark:text-green-400 mb-1">Take Profit</div>
                <div class="text-lg font-bold text-green-600 dark:text-green-400">${{ selectedSignal.take_profit | number:'1.2-6' }}</div>
              </div>
            </div>

            <!-- Quick Stats -->
            <div class="grid grid-cols-2 gap-4">
              <div>
                <h3 class="text-sm font-semibold text-gray-900 dark:text-white mb-2">Technikai Elemzés</h3>
                <div class="space-y-1">
                  <div class="flex justify-between text-xs">
                    <span class="text-gray-600 dark:text-gray-400">Pattern:</span>
                    <span class="font-medium">{{ selectedSignal.pattern || 'Nincs' }}</span>
                  </div>
                  <div class="flex justify-between text-xs">
                    <span class="text-gray-600 dark:text-gray-400">Trend:</span>
                    <span class="font-medium">{{ selectedSignal.trend || 'N/A' }}</span>
                  </div>
                  <div class="flex justify-between text-xs">
                    <span class="text-gray-600 dark:text-gray-400">Score:</span>
                    <span class="font-medium">{{ selectedSignal.score || 0 }}/5</span>
                  </div>
                </div>
              </div>
              <div>
                <h3 class="text-sm font-semibold text-gray-900 dark:text-white mb-2">Kockázat</h3>
                <div class="space-y-1">
                  <div class="flex justify-between text-xs">
                    <span class="text-gray-600 dark:text-gray-400">Erősség:</span>
                    <span class="font-medium">{{ getConfidenceText(selectedSignal.confidence) }}</span>
                  </div>
                  <div class="flex justify-between text-xs">
                    <span class="text-gray-600 dark:text-gray-400">Risk/Reward:</span>
                    <span class="font-medium">{{ calculateRiskReward(selectedSignal) }}</span>
                  </div>
                  <div class="flex justify-between text-xs">
                    <span class="text-gray-600 dark:text-gray-400">Összpontszám:</span>
                    <span class="font-medium">{{ selectedSignal.total_score || 0 }}</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <ng-template #noSelection>
          <div class="flex-1 flex items-center justify-center">
            <div class="text-center">
              <i class="pi pi-chart-line text-4xl text-gray-400 mb-2"></i>
              <h3 class="text-lg font-medium text-gray-900 dark:text-white mb-1">Válassz egy szignált</h3>
              <p class="text-gray-500 dark:text-gray-400 text-sm">Kattints egy sorra a bal oldalon</p>
            </div>
          </div>
        </ng-template>
      </div>
    </div>

    <!-- Bottom Panel - Signal Details -->
    <div class="h-1/2 flex bg-white dark:bg-gray-800">
      <!-- Signal Decision Matrix -->
      <div class="w-2/3 flex flex-col border-r border-gray-200 dark:border-gray-700">
        <div *ngIf="selectedSignal; else noDecisionMatrix" class="flex-1 flex flex-col">
          <!-- Decision Matrix Header -->
          <div class="p-4 border-b border-gray-200 dark:border-gray-700">
            <h3 class="text-xl font-bold text-gray-900 dark:text-white flex items-center">
              <i class="pi pi-cog text-blue-600 mr-2"></i>
              Szignál Döntési Mátrix
              <span class="ml-2 text-sm font-normal text-gray-500">
                (Összpontszám: {{ selectedSignal.total_score || 0 }})
              </span>
            </h3>
          </div>

          <!-- Decision Matrix Content -->
          <div class="flex-1 p-4 overflow-auto">
            <div class="grid grid-cols-4 gap-3">
              <!-- Candlestick Pattern Analysis -->
              <div class="border border-gray-200 dark:border-gray-700 rounded-lg p-2">
                <div class="flex items-center justify-between mb-1">
                  <div class="flex items-center">
                    <i class="pi pi-chart-bar text-purple-600 mr-1 text-xs"></i>
                    <span class="font-medium text-gray-900 dark:text-white text-xs">Gyertyaminta</span>
                  </div>
                  <div class="flex items-center space-x-1">
                    <p-tag
                      [value]="selectedSignal.decision_factors?.candlestick_pattern?.signal || 'NEUTRAL'"
                      [severity]="selectedSignal.decision_factors?.candlestick_pattern?.signal === 'BUY' ? 'success' : selectedSignal.decision_factors?.candlestick_pattern?.signal === 'SELL' ? 'danger' : 'secondary'"
                      class="text-xs scale-75">
                    </p-tag>
                    <span class="text-xs font-medium"
                          [class]="(selectedSignal.decision_factors?.candlestick_pattern?.weight || 0) > 0 ? 'text-green-600' : (selectedSignal.decision_factors?.candlestick_pattern?.weight || 0) < 0 ? 'text-red-600' : 'text-gray-600'">
                      {{ (selectedSignal.decision_factors?.candlestick_pattern?.weight || 0) > 0 ? '+' : '' }}{{ selectedSignal.decision_factors?.candlestick_pattern?.weight || 0 }}
                    </span>
                  </div>
                </div>
                <div class="text-xs text-gray-600 dark:text-gray-400 mb-1">
                  {{ getDecisionFactorName() }} ({{ getDecisionFactorScore() }}/5)
                </div>
                <div class="text-xs text-gray-700 dark:text-gray-300 line-clamp-2">
                  {{ getDecisionFactorReasoning('candlestick_pattern') }}
                </div>
              </div>

              <!-- Trend Analysis -->
              <div class="border border-gray-200 dark:border-gray-700 rounded-lg p-2">
                <div class="flex items-center justify-between mb-1">
                  <div class="flex items-center">
                    <i class="pi pi-arrow-up-right text-green-600 mr-1 text-xs"></i>
                    <span class="font-medium text-gray-900 dark:text-white text-xs">Trend</span>
                  </div>
                  <div class="flex items-center space-x-1">
                    <p-tag
                      [value]="getDecisionFactorSignal('trend_analysis')"
                      [severity]="getDecisionFactorSeverity('trend_analysis')"
                      class="text-xs scale-75">
                    </p-tag>
                    <span class="text-xs font-medium"
                          [class]="getDecisionFactorWeightClass('trend_analysis')">
                      {{ getDecisionFactorWeightDisplay('trend_analysis') }}
                    </span>
                  </div>
                </div>
                <div class="text-xs text-gray-600 dark:text-gray-400 mb-1">
                  {{ getDecisionFactorTrend() }}
                </div>
                <div class="text-xs text-gray-700 dark:text-gray-300 line-clamp-2">
                  {{ getDecisionFactorReasoning('trend_analysis') }}
                </div>
              </div>

              <!-- RSI Analysis -->
              <div class="border border-gray-200 dark:border-gray-700 rounded-lg p-2">
                <div class="flex items-center justify-between mb-1">
                  <div class="flex items-center">
                    <i class="pi pi-chart-line text-blue-600 mr-1 text-xs"></i>
                    <span class="font-medium text-gray-900 dark:text-white text-xs">RSI</span>
                  </div>
                  <div class="flex items-center space-x-1">
                    <p-tag
                      [value]="getDecisionFactorSignal('rsi_analysis')"
                      [severity]="getDecisionFactorSeverity('rsi_analysis')"
                      class="text-xs scale-75">
                    </p-tag>
                    <span class="text-xs font-medium"
                          [class]="getDecisionFactorWeightClass('rsi_analysis')">
                      {{ getDecisionFactorWeightDisplay('rsi_analysis') }}
                    </span>
                  </div>
                </div>
                <div class="text-xs text-gray-600 dark:text-gray-400 mb-1">
                  {{ getDecisionFactorValue('rsi_analysis') | number:'1.1-1' }}
                </div>
                <div class="text-xs text-gray-700 dark:text-gray-300 line-clamp-2">
                  {{ getDecisionFactorReasoning('rsi_analysis') }}
                </div>
              </div>

              <!-- MACD Analysis -->
              <div class="border border-gray-200 dark:border-gray-700 rounded-lg p-2">
                <div class="flex items-center justify-between mb-1">
                  <div class="flex items-center">
                    <i class="pi pi-sitemap text-orange-600 mr-1 text-xs"></i>
                    <span class="font-medium text-gray-900 dark:text-white text-xs">MACD</span>
                  </div>
                  <div class="flex items-center space-x-1">
                    <p-tag
                      [value]="getDecisionFactorSignal('macd_analysis')"
                      [severity]="getDecisionFactorSeverity('macd_analysis')"
                      class="text-xs scale-75">
                    </p-tag>
                    <span class="text-xs font-medium"
                          [class]="getDecisionFactorWeightClass('macd_analysis')">
                      {{ getDecisionFactorWeightDisplay('macd_analysis') }}
                    </span>
                  </div>
                </div>
                <div class="text-xs text-gray-600 dark:text-gray-400 mb-1">
                  {{ getDecisionFactorValue('macd_analysis') | number:'1.2-2' }}
                </div>
                <div class="text-xs text-gray-700 dark:text-gray-300 line-clamp-2">
                  {{ getDecisionFactorReasoning('macd_analysis') }}
                </div>
              </div>

              <!-- Momentum Strength -->
              <div class="border border-gray-200 dark:border-gray-700 rounded-lg p-2">
                <div class="flex items-center justify-between mb-1">
                  <div class="flex items-center">
                    <i class="pi pi-bolt text-yellow-600 mr-1 text-xs"></i>
                    <span class="font-medium text-gray-900 dark:text-white text-xs">Momentum</span>
                  </div>
                  <div class="flex items-center space-x-1">
                    <p-tag
                      [value]="getDecisionFactorSignal('momentum_strength')"
                      [severity]="getDecisionFactorSeverity('momentum_strength')"
                      class="text-xs scale-75">
                    </p-tag>
                    <span class="text-xs font-medium"
                          [class]="getDecisionFactorWeightClass('momentum_strength')">
                      {{ getDecisionFactorWeightDisplay('momentum_strength') }}
                    </span>
                  </div>
                </div>
                <div class="text-xs text-gray-600 dark:text-gray-400 mb-1">
                  {{ getDecisionFactorStrength() }}
                </div>
                <div class="text-xs text-gray-700 dark:text-gray-300 line-clamp-2">
                  {{ getDecisionFactorReasoning('momentum_strength') }}
                </div>
              </div>

              <!-- Volume Analysis -->
              <div class="border border-gray-200 dark:border-gray-700 rounded-lg p-2">
                <div class="flex items-center justify-between mb-1">
                  <div class="flex items-center">
                    <i class="pi pi-chart-bar text-indigo-600 mr-1 text-xs"></i>
                    <span class="font-medium text-gray-900 dark:text-white text-xs">Volume</span>
                  </div>
                  <div class="flex items-center space-x-1">
                    <p-tag
                      [value]="getDecisionFactorSignal('volume_analysis')"
                      [severity]="getDecisionFactorSeverity('volume_analysis')"
                      class="text-xs scale-75">
                    </p-tag>
                    <span class="text-xs font-medium"
                          [class]="getDecisionFactorWeightClass('volume_analysis')">
                      {{ getDecisionFactorWeightDisplay('volume_analysis') }}
                    </span>
                  </div>
                </div>
                <div class="text-xs text-gray-700 dark:text-gray-300 line-clamp-2">
                  {{ getDecisionFactorReasoning('volume_analysis') }}
                </div>
              </div>

              <!-- Support/Resistance Analysis -->
              <div class="border border-gray-200 dark:border-gray-700 rounded-lg p-2">
                <div class="flex items-center justify-between mb-1">
                  <div class="flex items-center">
                    <i class="pi pi-minus text-gray-600 mr-1 text-xs"></i>
                    <span class="font-medium text-gray-900 dark:text-white text-xs">S/R</span>
                  </div>
                  <div class="flex items-center space-x-1">
                    <p-tag
                      [value]="getDecisionFactorSignal('support_resistance')"
                      [severity]="getDecisionFactorSeverity('support_resistance')"
                      class="text-xs scale-75">
                    </p-tag>
                    <span class="text-xs font-medium"
                          [class]="getDecisionFactorWeightClass('support_resistance')">
                      {{ getDecisionFactorWeightDisplay('support_resistance') }}
                    </span>
                  </div>
                </div>
                <div class="text-xs text-gray-700 dark:text-gray-300 line-clamp-2">
                  {{ getDecisionFactorReasoning('support_resistance') }}
                </div>
              </div>
            </div>

            <!-- Final Decision Summary -->
            <div class="mt-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-700">
              <div class="flex items-center justify-between">
                <div>
                  <h4 class="font-semibold text-blue-900 dark:text-blue-100 mb-1">Végső Döntés</h4>
                  <p class="text-sm text-blue-700 dark:text-blue-300">
                    Az összes elemzési tényező alapján: <strong>{{ selectedSignal.signal }}</strong>
                  </p>
                </div>
                <div class="text-right">
                  <div class="text-2xl font-bold text-blue-900 dark:text-blue-100">
                    {{ selectedSignal.total_score || 0 }}
                  </div>
                  <div class="text-sm text-blue-600 dark:text-blue-400">Összpontszám</div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <ng-template #noDecisionMatrix>
          <div class="flex-1 flex items-center justify-center">
            <div class="text-center">
              <i class="pi pi-cog text-4xl text-gray-400 mb-2"></i>
              <h3 class="text-lg font-medium text-gray-900 dark:text-white mb-1">Döntési Mátrix</h3>
              <p class="text-gray-500 dark:text-gray-400 text-sm">Válassz egy szignált a mátrix megtekintéséhez</p>
            </div>
          </div>
        </ng-template>
      </div>

      <!-- AI Analysis Panel -->
      <div class="w-1/3 flex flex-col">
        <div *ngIf="selectedSignal; else noAIAnalysis" class="flex-1 flex flex-col">
          <!-- AI Analysis Header -->
          <div class="p-4 border-b border-gray-200 dark:border-gray-700">
            <h3 class="text-lg font-bold text-gray-900 dark:text-white flex items-center">
              <i class="pi pi-sparkles text-purple-600 mr-2"></i>
              AI Elemzés
            </h3>
          </div>

          <!-- AI Analysis Content -->
          <div class="flex-1 p-4 overflow-auto">
            <!-- Loading State -->
            <div *ngIf="loadingAIAnalysis" class="space-y-3">
              <p-skeleton height="3rem"></p-skeleton>
              <p-skeleton height="4rem"></p-skeleton>
              <p-skeleton height="3rem"></p-skeleton>
            </div>

            <!-- AI Analysis Content -->
            <div *ngIf="!loadingAIAnalysis && selectedSignalAIAnalysis" class="space-y-4">
              <!-- Sentiment Analysis -->
              <div class="border border-gray-200 dark:border-gray-700 rounded-lg p-3">
                <h4 class="font-medium text-gray-900 dark:text-white mb-2">🧠 Sentiment</h4>
                <div class="space-y-2">
                  <div class="flex justify-between text-sm">
                    <span class="text-gray-600 dark:text-gray-400">Sentiment:</span>
                    <span class="font-medium" [class]="selectedSignalAIAnalysis.sentiment.overall_sentiment > 0 ? 'text-green-600' : 'text-red-600'">
                      {{ selectedSignalAIAnalysis.sentiment.sentiment_label }}
                    </span>
                  </div>
                  <div class="flex justify-between text-sm">
                    <span class="text-gray-600 dark:text-gray-400">Bizalom:</span>
                    <span class="font-medium">{{ selectedSignalAIAnalysis.sentiment.confidence | number:'1.0-0' }}%</span>
                  </div>
                </div>
              </div>

              <!-- Price Prediction -->
              <div class="border border-gray-200 dark:border-gray-700 rounded-lg p-3">
                <h4 class="font-medium text-gray-900 dark:text-white mb-2">📈 Előrejelzés</h4>
                <div class="space-y-2">
                  <div class="flex justify-between text-sm">
                    <span class="text-gray-600 dark:text-gray-400">Előrejelzett Ár:</span>
                    <span class="font-medium">${{ selectedSignalAIAnalysis.prediction.predicted_price | number:'1.2-6' }}</span>
                  </div>
                  <div class="flex justify-between text-sm">
                    <span class="text-gray-600 dark:text-gray-400">Változás:</span>
                    <span class="font-medium" [class]="selectedSignalAIAnalysis.prediction.price_change_percent > 0 ? 'text-green-600' : 'text-red-600'">
                      {{ selectedSignalAIAnalysis.prediction.price_change_percent | number:'1.2-2' }}%
                    </span>
                  </div>
                </div>
              </div>

              <!-- AI Recommendation -->
              <div class="border border-gray-200 dark:border-gray-700 rounded-lg p-3">
                <h4 class="font-medium text-gray-900 dark:text-white mb-2">🎯 AI Ajánlás</h4>
                <div class="space-y-2">
                  <div class="flex justify-between text-sm">
                    <span class="text-gray-600 dark:text-gray-400">Akció:</span>
                    <span class="font-medium">{{ selectedSignalAIAnalysis.recommendation.action }}</span>
                  </div>
                  <div class="flex justify-between text-sm">
                    <span class="text-gray-600 dark:text-gray-400">Bizalom:</span>
                    <span class="font-medium">{{ selectedSignalAIAnalysis.recommendation.confidence }}%</span>
                  </div>
                  <div class="flex justify-between text-sm">
                    <span class="text-gray-600 dark:text-gray-400">Kockázat:</span>
                    <span class="font-medium" [class]="selectedSignalAIAnalysis.risk_score > 70 ? 'text-red-600' : selectedSignalAIAnalysis.risk_score > 40 ? 'text-yellow-600' : 'text-green-600'">
                      {{ selectedSignalAIAnalysis.risk_score }}/100
                    </span>
                  </div>
                </div>
              </div>
            </div>

            <!-- No AI Analysis Available -->
            <div *ngIf="!loadingAIAnalysis && !selectedSignalAIAnalysis" class="text-center py-8">
              <i class="pi pi-exclamation-triangle text-3xl text-gray-400 mb-2"></i>
              <p class="text-gray-500 dark:text-gray-400 text-sm">AI elemzés nem elérhető</p>
            </div>

            <!-- Trading Actions -->
            <div class="border-t border-gray-200 dark:border-gray-700 pt-4 mt-4">
              <h4 class="font-medium text-gray-900 dark:text-white mb-3">Kereskedési Műveletek</h4>
              <div class="space-y-2">
                <p-button
                  *ngIf="selectedSignal.signal === 'BUY'"
                  label="Vásárlás"
                  icon="pi pi-arrow-up"
                  severity="success"
                  size="small"
                  (onClick)="executeTrade('BUY', selectedSignal)"
                  class="w-full"
                ></p-button>
                <p-button
                  *ngIf="selectedSignal.signal === 'SELL'"
                  label="Eladás"
                  icon="pi pi-arrow-down"
                  severity="danger"
                  size="small"
                  (onClick)="executeTrade('SELL', selectedSignal)"
                  class="w-full"
                ></p-button>
                <p-button
                  label="Chart megjelenítése"
                  icon="pi pi-chart-line"
                  severity="secondary"
                  size="small"
                  (onClick)="showChart(selectedSignal)"
                  class="w-full"
                ></p-button>
              </div>
            </div>
          </div>
        </div>

        <ng-template #noAIAnalysis>
          <div class="flex-1 flex items-center justify-center">
            <div class="text-center">
              <i class="pi pi-sparkles text-4xl text-gray-400 mb-2"></i>
              <h3 class="text-lg font-medium text-gray-900 dark:text-white mb-1">AI Elemzés</h3>
              <p class="text-gray-500 dark:text-gray-400 text-sm">Válassz egy szignált az elemzés megtekintéséhez</p>
            </div>
          </div>
        </ng-template>
      </div>
    </div>
  </div>
</div>

<!-- Toast for notifications -->
<p-toast position="top-right"></p-toast>

<!-- Confirmation Dialog -->
<p-confirmDialog></p-confirmDialog>

<!-- Chart Modal -->
<p-dialog
  [(visible)]="showChartModal"
  [header]="'Chart: ' + (selectedSignal?.symbol || '')"
  [modal]="true"
  [closable]="true"
  [resizable]="true"
  [maximizable]="true"
  styleClass="chart-modal"
  [style]="{width: '90vw', height: '80vh'}"
  (onHide)="closeChart()"
>
  <div class="w-full h-full" style="min-height: 600px;">
    <app-trading-view-widget
      *ngIf="selectedSignal && showChartModal"
      [symbol]="selectedSignal.symbol"
      [interval]="'1H'"
      [theme]="'light'"
    ></app-trading-view-widget>
  </div>
</p-dialog>